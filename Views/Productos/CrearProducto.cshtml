@model WS_2_0.Models.CrearProductoViewModel
@{
    ViewData["Title"] = "CrearProducto";
}
<!DOCTYPE html>
<html lang="es">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="~/css/administrador.css"/>
    </head>
<body>
    <header>
        <!-- TopBar -->
        <partial name="_TopBarAdministrador"/>
        <!-- SideBar-->
        <partial name="_SideBar"/>
    </header>
    <div class="main-content">
        <div class="card">
<div class="card">
    <div class="card-header">
        Crear Producto
    </div>
    <div class="card-body">

        <form asp-action="CrearProducto" asp-controller="Productos" method="post">
             @Html.AntiForgeryToken()
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputEmail4">Nombre</label>
                        <input asp-for="Nombre" type="text" class="form-control">
                        <span asp-validation-for="Nombre" class="text-danger"></span>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">Descripcion</label>
                        <input asp-for="Descripcion" type="text" class="form-control">
                        <span asp-validation-for="Descripcion" class="text-danger"></span>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputEmail4">Precio</label>
                        <input asp-for="Precio" class="form-control" id="inputEmail4">
                        <span asp-validation-for="Precio" class="text-danger"></span>
                    </div>
                    <label for="fileInput" class="change-photo-btn">
                        <i class="fa fa-camera"></i> Cambiar foto
                    </label>
                    <input asp-for="ImagenUrl" type="file" id="fileInput" accept="image/*" />
                    <script>
                        function previewAndSubmit() {
                            const input = document.getElementById('fileInput');
                            if (input.files.length > 0) {
                                input.form.submit(); // envía el formulario automáticamente
                            }
                        }
                    </script>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">Stock</label>
                        <input asp-for="Stock" type="number" class="form-control" id="inputPassword4">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label asp-for="Categoria">Categoría</label>
                        <input asp-for="Categoria" type="text" class="form-control" />
                        <span asp-validation-for="Categoria" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label asp-for="Activo" class="control-label"></label>
                    @Html.DropDownListFor(model => model.Activo,
                    new List<SelectListItem>
                    {
                        new SelectListItem { Text = "Activo", Value = "true", Selected = Model.Activo },
                        new SelectListItem { Text = "Inactivo", Value = "false", Selected = !Model.Activo }
                    },
                    htmlAttributes: new { @class = "form-control" })
                    <span asp-validation-for="Activo" class="text-danger"></span>
                </div>
                <button type="submit" class="btn btn-primary">Crear</button>
                <a asp-action="Index" asp-controller="Productos" class="btn btn-danger">Cancelar</a>
        </form>
    @if (!ViewData.ModelState.IsValid)
{
    <div class="alert alert-danger">
        <ul>
        @foreach (var modelState in ViewData.ModelState)
        {
            foreach (var error in modelState.Value.Errors)
            {
                <li>@modelState.Key: @error.ErrorMessage</li>
            }
        }
        </ul>
    </div>
}
    </div>
</div>
</div>
</div>

    <script src="/js/admin.js" asp-append-version="true"></script>
    <script src="/js/eliminarCache.js"></script>
@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
}
</body>
</html>